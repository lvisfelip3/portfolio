---
import { MdOutlineVerticalAlignTop } from "react-icons/md";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
---

<button 
    class="border border-gray-400 border-opacity-20 opacity-0 pointer-events-none w-14 h-14 flex justify-center items-center fixed right-5 bottom-14 md:right-10 md:bottom-10 rounded-lg bg-gray-900 text-slate-200 hover:bg-slate-200 hover:text-gray-900 transition-all duration-300 z-50"
    id="goTop"
>
    <span class="sr-only">{t("goTop")}</span>
    <MdOutlineVerticalAlignTop className="w-full h-full p-3"/>
</button>

<script>
    document.addEventListener("astro:page-load", () => {
        const button = document.querySelector("#goTop");
        button.addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
        });

        window.addEventListener("scroll", () => {
            if (window.scrollY > 500) {
                button.classList.remove("opacity-0", "translate-y-2", "pointer-events-none");
                button.classList.add("opacity-100", "translate-y-0");
            } else {
                button.classList.remove("opacity-100", "translate-y-0");
                button.classList.add("opacity-0", "translate-y-2", "pointer-events-none");
            }
        });
    })
</script>